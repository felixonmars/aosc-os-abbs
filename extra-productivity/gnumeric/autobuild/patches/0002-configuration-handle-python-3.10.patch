From ce9a83df362c549aef04c5074fae928a5eeeea51 Mon Sep 17 00:00:00 2001
From: Morten Welinder <terra@gnome.org>
Date: Sat, 24 Apr 2021 08:13:19 -0400
Subject: [PATCH] configuration: handle python 3.10

Old sins coming back to bite us...
---
 configure.ac | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/configure.ac b/configure.ac
index 63af2f9e8..0d44bf847 100644
--- a/configure.ac
+++ b/configure.ac
@@ -901,8 +901,8 @@ AM_CONDITIONAL(HAVE_PYTHON_GI, test "x$have_python_gi" = "xyes")
 
 if test "x$python_msg" = xyes; then
     BIG_CHECKING([for python = 3.x])
-    [PY_VERSION=`$PYTHON -c 'import sys ; sys.stdout.write(sys.version[0:3])'`
-     major_ver=`$PYTHON -c 'import sys ; sys.stdout.write(sys.version[0:1])'`]
+    [PY_VERSION=`$PYTHON -c 'import sys; sys.stdout.write("{:d}.{:d}".format(*sys.version_info))'`
+     major_ver=`$PYTHON -c 'import sys ; sys.stdout.write(str(sys.version_info[0]))'`]
     if test "x$major_ver" = "x3"; then
 	AC_MSG_RESULT(yes)
 	if test "x$with_native_win32" = xyes ; then
-- 
2.38.1

